import{s as U,H as _e,J as F,w as Ee,f as ke,K as we,L as xe,h as Pe,Z as w,q as Be,$ as Le,M as Te,a0 as $e,B as je,T as Ie,U as z,a1 as Re,W as K,P as Ae,G as Ne,X as q,_ as J,a2 as He,Y as Oe}from"./VTextField-tUO0oKPY.js";import{g as B,p as L,H as oe,_ as Ye,u as j,a as i,E as I,a0 as Ge,m as $,j as b,ak as ae,al as R,am as W,d as We,h as De,b as P,U as Me,M as Xe,N as Y,B as se,v as N,O as Ue,an as le,P as Fe,Q as ze,s as G,k as Ke,x as ue,y as qe,e as Je,z as Qe,Y as Ze,R as pe,ae as Q,J as et,ao as tt,ad as nt,ap as H,aq as ot,aj as x,o as k,w as y,F as Z,ar as p,c as T,as as ee,at as O,ag as at}from"./index-CL-Ayl5x.js";const st=L({fluid:{type:Boolean,default:!1},...$(),...Ge(),...I()},"VContainer"),lt=B()({name:"VContainer",props:st(),setup(e,n){let{slots:t}=n;const{rtlClasses:o}=oe(),{dimensionStyles:s}=Ye(e);return j(()=>i(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},o.value,e.class],style:[s.value,e.style]},t)),{}}}),ie=R.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}),re=R.reduce((e,n)=>{const t="offset"+W(n);return e[t]={type:[String,Number],default:null},e},{}),ce=R.reduce((e,n)=>{const t="order"+W(n);return e[t]={type:[String,Number],default:null},e},{}),te={col:Object.keys(ie),offset:Object.keys(re),order:Object.keys(ce)};function ut(e,n,t){let o=e;if(!(t==null||t===!1)){if(n){const s=n.replace(e,"");o+=`-${s}`}return e==="col"&&(o="v-"+o),e==="col"&&(t===""||t===!0)||(o+=`-${t}`),o.toLowerCase()}}const it=["auto","start","end","center","baseline","stretch"],rt=L({cols:{type:[Boolean,String,Number],default:!1},...ie,offset:{type:[String,Number],default:null},...re,order:{type:[String,Number],default:null},...ce,alignSelf:{type:String,default:null,validator:e=>it.includes(e)},...$(),...I()},"VCol"),ct=B()({name:"VCol",props:rt(),setup(e,n){let{slots:t}=n;const o=b(()=>{const s=[];let r;for(r in te)te[r].forEach(u=>{const d=e[u],g=ut(r,u,d);g&&s.push(g)});const a=s.some(u=>u.startsWith("v-col-"));return s.push({"v-col":!a||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),s});return()=>{var s;return ae(e.tag,{class:[o.value,e.class],style:e.style},(s=t.default)==null?void 0:s.call(t))}}}),D=["start","end","center"],de=["space-between","space-around","space-evenly"];function M(e,n){return R.reduce((t,o)=>{const s=e+W(o);return t[s]=n(),t},{})}const dt=[...D,"baseline","stretch"],fe=e=>dt.includes(e),ve=M("align",()=>({type:String,default:null,validator:fe})),ft=[...D,...de],me=e=>ft.includes(e),ge=M("justify",()=>({type:String,default:null,validator:me})),vt=[...D,...de,"stretch"],he=e=>vt.includes(e),ye=M("alignContent",()=>({type:String,default:null,validator:he})),ne={align:Object.keys(ve),justify:Object.keys(ge),alignContent:Object.keys(ye)},mt={align:"align",justify:"justify",alignContent:"align-content"};function gt(e,n,t){let o=mt[e];if(t!=null){if(n){const s=n.replace(e,"");o+=`-${s}`}return o+=`-${t}`,o.toLowerCase()}}const ht=L({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:fe},...ve,justify:{type:String,default:null,validator:me},...ge,alignContent:{type:String,default:null,validator:he},...ye,...$(),...I()},"VRow"),yt=B()({name:"VRow",props:ht(),setup(e,n){let{slots:t}=n;const o=b(()=>{const s=[];let r;for(r in ne)ne[r].forEach(a=>{const u=e[a],d=gt(r,a,u);d&&s.push(d)});return s.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),s});return()=>{var s;return ae(e.tag,{class:["v-row",o.value,e.class],style:e.style},(s=t.default)==null?void 0:s.call(t))}}}),bt=We("score",{state:()=>({loading:!1,error:null,scores:[]}),actions:{async assignScores(e,n,t){let o=[];t.map((s,r)=>{Object.entries(s).map(([a,u])=>{o.push({game_id:e,game_player_id:n[r].id,hole_id:a,score:Number(u)})})}),console.log("Mapped scores:",o),await U.from("scores").insert(o)},getScoresByGameId(e){return this.loading=!0,this.error=null,U.from("scores").select(`
          *,
          game_player:game_players (
            player:players (
              id,
              name
            )
          ),
          hole:holes (
            hole_number
          )
        `).eq("game_id",e).then(({data:n,error:t})=>t?(console.error("Error getting scores:",t.message),this.error=t.message,[]):(this.scores=n,n)).finally(()=>{this.loading=!1})}}}),Vt=L({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...we({origin:"center center",scrollStrategy:"block",transition:{component:xe},zIndex:2400})},"VDialog"),St=B()({name:"VDialog",props:Vt(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{emit:t,slots:o}=n;const s=De(e,"modelValue"),{scopeId:r}=_e(),a=P();function u(f){var m,l;const v=f.relatedTarget,S=f.target;if(v!==S&&((m=a.value)!=null&&m.contentEl)&&((l=a.value)!=null&&l.globalTop)&&![document,a.value.contentEl].includes(S)&&!a.value.contentEl.contains(S)){const c=Ue(a.value.contentEl);if(!c.length)return;const C=c[0],E=c[c.length-1];v===C?E.focus():C.focus()}}Me(()=>{document.removeEventListener("focusin",u)}),Xe&&Y(()=>s.value&&e.retainFocus,f=>{f?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function d(){var f;t("afterEnter"),(f=a.value)!=null&&f.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function g(){t("afterLeave")}return Y(s,async f=>{var v;f||(await se(),(v=a.value.activatorEl)==null||v.focus({preventScroll:!0}))}),j(()=>{const f=F.filterProps(e),v=N({"aria-haspopup":"dialog"},e.activatorProps),S=N({tabindex:-1},e.contentProps);return i(F,N({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},f,{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,"aria-modal":"true",activatorProps:v,contentProps:S,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:d,onAfterLeave:g},r),{activator:o.activator,default:function(){for(var m=arguments.length,l=new Array(m),c=0;c<m;c++)l[c]=arguments[c];return i(Ee,{root:"VDialog"},{default:()=>{var C;return[(C=o.default)==null?void 0:C.call(o,...l)]}})}})}),ke({},a)}}),Ct=e=>{const{touchstartX:n,touchendX:t,touchstartY:o,touchendY:s}=e,r=.5,a=16;e.offsetX=t-n,e.offsetY=s-o,Math.abs(e.offsetY)<r*Math.abs(e.offsetX)&&(e.left&&t<n-a&&e.left(e),e.right&&t>n+a&&e.right(e)),Math.abs(e.offsetX)<r*Math.abs(e.offsetY)&&(e.up&&s<o-a&&e.up(e),e.down&&s>o+a&&e.down(e))};function _t(e,n){var o;const t=e.changedTouches[0];n.touchstartX=t.clientX,n.touchstartY=t.clientY,(o=n.start)==null||o.call(n,{originalEvent:e,...n})}function Et(e,n){var o;const t=e.changedTouches[0];n.touchendX=t.clientX,n.touchendY=t.clientY,(o=n.end)==null||o.call(n,{originalEvent:e,...n}),Ct(n)}function kt(e,n){var o;const t=e.changedTouches[0];n.touchmoveX=t.clientX,n.touchmoveY=t.clientY,(o=n.move)==null||o.call(n,{originalEvent:e,...n})}function wt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:t=>_t(t,n),touchend:t=>Et(t,n),touchmove:t=>kt(t,n)}}function xt(e,n){var u;const t=n.value,o=t!=null&&t.parent?e.parentElement:e,s=(t==null?void 0:t.options)??{passive:!0},r=(u=n.instance)==null?void 0:u.$.uid;if(!o||!r)return;const a=wt(n.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[r]=a,le(a).forEach(d=>{o.addEventListener(d,a[d],s)})}function Pt(e,n){var r,a;const t=(r=n.value)!=null&&r.parent?e.parentElement:e,o=(a=n.instance)==null?void 0:a.$.uid;if(!(t!=null&&t._touchHandlers)||!o)return;const s=t._touchHandlers[o];le(s).forEach(u=>{t.removeEventListener(u,s[u])}),delete t._touchHandlers[o]}const be={mounted:xt,unmounted:Pt},Ve=Symbol.for("vuetify:v-window"),Se=Symbol.for("vuetify:v-window-group"),Bt=L({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...$(),...I(),...Je()},"VWindow"),Lt=B()({name:"VWindow",directives:{Touch:be},props:Bt(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const{themeClasses:o}=Fe(e),{isRtl:s}=oe(),{t:r}=ze(),a=Pe(e,Se),u=P(),d=b(()=>s.value?!e.reverse:e.reverse),g=G(!1),f=b(()=>{const h=e.direction==="vertical"?"y":"x",_=(d.value?!g.value:g.value)?"-reverse":"";return`v-window-${h}${_}-transition`}),v=G(0),S=P(void 0),m=b(()=>a.items.value.findIndex(h=>a.selected.value.includes(h.id)));Y(m,(h,V)=>{const _=a.items.value.length,X=_-1;_<=2?g.value=h<V:h===X&&V===0?g.value=!0:h===0&&V===X?g.value=!1:g.value=h<V}),Ke(Ve,{transition:f,isReversed:g,transitionCount:v,transitionHeight:S,rootRef:u});const l=b(()=>e.continuous||m.value!==0),c=b(()=>e.continuous||m.value!==a.items.value.length-1);function C(){l.value&&a.prev()}function E(){c.value&&a.next()}const A=b(()=>{const h=[],V={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${d.value?"right":"left"}`,onClick:a.prev,"aria-label":r("$vuetify.carousel.prev")};h.push(l.value?t.prev?t.prev({props:V}):i(w,V,null):i("div",null,null));const _={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${d.value?"left":"right"}`,onClick:a.next,"aria-label":r("$vuetify.carousel.next")};return h.push(c.value?t.next?t.next({props:_}):i(w,_,null):i("div",null,null)),h}),Ce=b(()=>e.touch===!1?e.touch:{...{left:()=>{d.value?C():E()},right:()=>{d.value?E():C()},start:V=>{let{originalEvent:_}=V;_.stopPropagation()}},...e.touch===!0?{}:e.touch});return j(()=>ue(i(e.tag,{ref:u,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},o.value,e.class],style:e.style},{default:()=>{var h,V;return[i("div",{class:"v-window__container",style:{height:S.value}},[(h=t.default)==null?void 0:h.call(t,{group:a}),e.showArrows!==!1&&i("div",{class:"v-window__controls"},[A.value])]),(V=t.additional)==null?void 0:V.call(t,{group:a})]}}),[[qe("touch"),Ce.value]])),{group:a}}}),Tt=L({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...$(),...je(),...$e()},"VWindowItem"),$t=B()({name:"VWindowItem",directives:{Touch:be},props:Tt(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:t}=n;const o=Qe(Ve),s=Be(e,Se),{isBooted:r}=Ze();if(!o||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=G(!1),u=b(()=>r.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function d(){!a.value||!o||(a.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function g(){var l;a.value||!o||(a.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Q((l=o.rootRef.value)==null?void 0:l.clientHeight)),o.transitionCount.value+=1)}function f(){d()}function v(l){a.value&&se(()=>{!u.value||!a.value||!o||(o.transitionHeight.value=Q(l.clientHeight))})}const S=b(()=>{const l=o.isReversed.value?e.reverseTransition:e.transition;return u.value?{name:typeof l!="string"?o.transition.value:l,onBeforeEnter:g,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:g,onAfterLeave:d,onLeaveCancelled:f,onEnter:v}:!1}),{hasContent:m}=Le(e,s.isSelected);return j(()=>i(Te,{transition:S.value,disabled:!r.value},{default:()=>{var l;return[ue(i("div",{class:["v-window-item",s.selectedClass.value,e.class],style:e.style},[m.value&&((l=t.default)==null?void 0:l.call(t))]),[[pe,s.isSelected.value]])]}})),{groupItem:s}}}),jt={key:0},It={__name:"Game",setup(e){const{mobile:n}=et(),t=Ie(),o=bt(),r=tt().params.id,a=P(!1),u=P(0),d=b(()=>t.game?`Hola ${t.game.course.holes[u.value].hole_number}`:""),g=b(()=>t.game?`Par ${t.game.course.holes[u.value].par}`:""),f=b(()=>t.game?`${t.game.course.holes[u.value].distance}m`:""),v=P(null),S=async()=>{console.log("HERE",v.value),await o.assignScores(r,t.game.players,v.value)};return nt(async()=>{await t.getGameById(r),console.log("PLAYERS",t.game.players),v.value=t.game.players.map(()=>{const m={};for(const l of t.game.course.holes)m[l.id]=null;return console.log("SCORES",m),m})}),(m,l)=>x(t).game&&v.value?(k(),H("div",jt,[i(J,{height:x(n)?"100vh":void 0,width:x(n)?"100vw":void 0,class:"d-flex flex-column"},{default:y(()=>[i(Lt,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=c=>u.value=c),class:"flex-grow-1"},{default:y(()=>[(k(!0),H(Z,null,p(x(t).game.course.holes,c=>(k(),T($t,{key:c.hole_number},{default:y(()=>[i(z,{class:"d-flex justify-center"},{default:y(()=>[ee("span",null,O(d.value)+" ("+O(f.value)+")",1)]),_:1}),i(Re,{class:"d-flex justify-space-around"},{default:y(()=>[ee("span",null,O(g.value),1)]),_:1}),i(K,null,{default:y(()=>[i(lt,{fluid:""},{default:y(()=>[(k(!0),H(Z,null,p(x(t).game.players,(C,E)=>(k(),T(yt,{key:E},{default:y(()=>[i(ct,null,{default:y(()=>[i(Ae,{modelValue:v.value[E][c.id],"onUpdate:modelValue":A=>v.value[E][c.id]=A,label:C.player.name,variant:"outlined",type:"number"},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"]),i(Ne),i(q,{class:"d-flex justify-space-between"},{default:y(()=>[i(w,{disabled:u.value==0,variant:"text",onClick:l[1]||(l[1]=c=>u.value--),icon:"mdi-arrow-left"},null,8,["disabled"]),i(w,{icon:"mdi-map",onClick:l[2]||(l[2]=c=>a.value=!0)}),i(w,{icon:"mdi-view-list",onClick:l[3]||(l[3]=c=>a.value=!0)}),u.value<x(t).game.course.holes.length-1?(k(),T(w,{key:0,onClick:l[4]||(l[4]=c=>u.value++),icon:"mdi-arrow-right"})):(k(),T(w,{key:1,icon:"mdi-check",onClick:S}))]),_:1})]),_:1},8,["height","width"]),i(St,{modelValue:a.value,"onUpdate:modelValue":l[6]||(l[6]=c=>a.value=c),fullscreen:""},{default:y(()=>[i(J,null,{default:y(()=>[i(z,{class:"d-flex justify-center"},{default:y(()=>l[7]||(l[7]=[at("Klambratún")])),_:1}),i(K,{class:"d-flex justify-center flex-column"},{default:y(()=>[i(He,{src:x(t).game.course.map_url},null,8,["src"])]),_:1}),i(q,{class:"d-flex justify-space-between"},{default:y(()=>[i(Oe),i(w,{onClick:l[5]||(l[5]=c=>a.value=!1),icon:"mdi-close"})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):ot("",!0)}},Rt=(e,n)=>{const t=e.__vccOpts||e;for(const[o,s]of n)t[o]=s;return t},At={};function Nt(e,n){const t=It;return k(),T(t)}const Yt=Rt(At,[["render",Nt]]);export{Yt as default};
