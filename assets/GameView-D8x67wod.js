import{s as te,T as ue,U as q,W as z,a0 as $e,_ as J,Y as X,H as Be,J as ne,w as Te,f as Le,K as je,L as Ie,h as Ae,Z as w,q as Ne,a1 as Re,M as Ge,a2 as He,B as Me,a3 as Oe,P as De,G as We,X as Xe,$ as Ye}from"./_plugin-vue_export-helper-BQ_cIXLz.js";import{g as L,p as j,C as re,V as Ue,u as M,c as l,A as O,X as Fe,m as R,h as _,ai as ie,aj as D,ak as Q,d as Ke,ae as x,af as y,ag as f,ab as ce,ah as k,al as B,F as T,am as A,an as H,ao as N,e as qe,r as P,Q as ze,H as Je,J as U,x as de,l as Y,K as Qe,ap as fe,L as Ze,M as pe,s as F,i as et,w as ve,n as tt,a as nt,q as at,T as ot,N as st,a9 as ae,D as lt,aq as ut,a8 as rt,ar as it}from"./index-C6SUafqH.js";const ct=j({fluid:{type:Boolean,default:!1},...R(),...Fe(),...O()},"VContainer"),me=L()({name:"VContainer",props:ct(),setup(e,n){let{slots:t}=n;const{rtlClasses:a}=re(),{dimensionStyles:s}=Ue(e);return M(()=>l(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},a.value,e.class],style:[s.value,e.style]},t)),{}}}),ge=D.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}),he=D.reduce((e,n)=>{const t="offset"+Q(n);return e[t]={type:[String,Number],default:null},e},{}),ye=D.reduce((e,n)=>{const t="order"+Q(n);return e[t]={type:[String,Number],default:null},e},{}),oe={col:Object.keys(ge),offset:Object.keys(he),order:Object.keys(ye)};function dt(e,n,t){let a=e;if(!(t==null||t===!1)){if(n){const s=n.replace(e,"");a+=`-${s}`}return e==="col"&&(a="v-"+a),e==="col"&&(t===""||t===!0)||(a+=`-${t}`),a.toLowerCase()}}const ft=["auto","start","end","center","baseline","stretch"],vt=j({cols:{type:[Boolean,String,Number],default:!1},...ge,offset:{type:[String,Number],default:null},...he,order:{type:[String,Number],default:null},...ye,alignSelf:{type:String,default:null,validator:e=>ft.includes(e)},...R(),...O()},"VCol"),K=L()({name:"VCol",props:vt(),setup(e,n){let{slots:t}=n;const a=_(()=>{const s=[];let r;for(r in oe)oe[r].forEach(i=>{const c=e[i],h=dt(r,i,c);h&&s.push(h)});const o=s.some(i=>i.startsWith("v-col-"));return s.push({"v-col":!o||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),s});return()=>{var s;return ie(e.tag,{class:[a.value,e.class],style:e.style},(s=t.default)==null?void 0:s.call(t))}}}),Z=["start","end","center"],Ve=["space-between","space-around","space-evenly"];function p(e,n){return D.reduce((t,a)=>{const s=e+Q(a);return t[s]=n(),t},{})}const mt=[...Z,"baseline","stretch"],be=e=>mt.includes(e),_e=p("align",()=>({type:String,default:null,validator:be})),gt=[...Z,...Ve],Se=e=>gt.includes(e),Ce=p("justify",()=>({type:String,default:null,validator:Se})),ht=[...Z,...Ve,"stretch"],xe=e=>ht.includes(e),Ee=p("alignContent",()=>({type:String,default:null,validator:xe})),se={align:Object.keys(_e),justify:Object.keys(Ce),alignContent:Object.keys(Ee)},yt={align:"align",justify:"justify",alignContent:"align-content"};function Vt(e,n,t){let a=yt[e];if(t!=null){if(n){const s=n.replace(e,"");a+=`-${s}`}return a+=`-${t}`,a.toLowerCase()}}const bt=j({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:be},..._e,justify:{type:String,default:null,validator:Se},...Ce,alignContent:{type:String,default:null,validator:xe},...Ee,...R(),...O()},"VRow"),G=L()({name:"VRow",props:bt(),setup(e,n){let{slots:t}=n;const a=_(()=>{const s=[];let r;for(r in se)se[r].forEach(o=>{const i=e[o],c=Vt(r,o,i);c&&s.push(c)});return s.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),s});return()=>{var s;return ie(e.tag,{class:["v-row",a.value,e.class],style:e.style},(s=t.default)==null?void 0:s.call(t))}}}),_t=Ke("score",{state:()=>({loading:!1,error:null,scores:[]}),actions:{async assignScores(e,n,t){let a=[];t.map((s,r)=>{Object.entries(s).map(([o,i])=>{a.push({game_id:e,game_player_id:n[r].id,hole_id:o,score:Number(i)})})}),console.log("Mapped scores:",a),await te.from("scores").insert(a)},getScoresByGameId(e){return this.loading=!0,this.error=null,te.from("scores").select(`
          *,
          game_player:game_players (
            player:players (
              id,
              name
            )
          ),
          hole:holes (
            hole_number
          )
        `).eq("game_id",e).then(({data:n,error:t})=>t?(console.error("Error getting scores:",t.message),this.error=t.message,[]):(this.scores=n,n)).finally(()=>{this.loading=!1})}}}),St={__name:"GameMap",setup(e){const n=ue();return(t,a)=>(y(),x(J,null,{default:f(()=>[l(q,{class:"d-flex justify-center"},{default:f(()=>a[0]||(a[0]=[ce("KlambratÃºn")])),_:1}),l(z,{class:"d-flex justify-center flex-column"},{default:f(()=>[l($e,{src:k(n).game.course.map_url},null,8,["src"])]),_:1})]),_:1}))}},Ct={class:"text-h6"},xt={class:"text-h6"},Et={__name:"GameScore",props:{scores:{type:Array,required:!0}},setup(e){const n=e,t=_(()=>Math.floor(10/n.scores.length));return(a,s)=>(y(),x(J,null,{default:f(()=>[l(q,{class:"d-flex justify-center"},{default:f(()=>s[0]||(s[0]=[ce("Score")])),_:1}),l(z,{class:"d-flex flex-column"},{default:f(()=>[l(me,{fluid:""},{default:f(()=>[l(G,null,{default:f(()=>[l(K,{cols:"2"},{default:f(()=>[(y(!0),B(T,null,A(e.scores[0],(r,o)=>(y(),x(G,{key:o,class:"border text-end pr-1"},{default:f(()=>[l(X),H("span",Ct,N(o),1)]),_:2},1024))),128))]),_:1}),(y(!0),B(T,null,A(e.scores,(r,o)=>(y(),x(K,{cols:t.value,key:o,class:"text-end"},{default:f(()=>[(y(!0),B(T,null,A(r,(i,c)=>(y(),x(G,{key:c,class:"border"},{default:f(()=>[l(X),H("span",xt,N(i||"-"),1),l(X)]),_:2},1024))),128))]),_:2},1032,["cols"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}},kt=j({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...je({origin:"center center",scrollStrategy:"block",transition:{component:Ie},zIndex:2400})},"VDialog"),le=L()({name:"VDialog",props:kt(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,n){let{emit:t,slots:a}=n;const s=qe(e,"modelValue"),{scopeId:r}=Be(),o=P();function i(m){var b,v;const S=m.relatedTarget,g=m.target;if(S!==g&&((b=o.value)!=null&&b.contentEl)&&((v=o.value)!=null&&v.globalTop)&&![document,o.value.contentEl].includes(g)&&!o.value.contentEl.contains(g)){const u=Qe(o.value.contentEl);if(!u.length)return;const d=u[0],$=u[u.length-1];S===d?$.focus():d.focus()}}ze(()=>{document.removeEventListener("focusin",i)}),Je&&U(()=>s.value&&e.retainFocus,m=>{m?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0});function c(){var m;t("afterEnter"),(m=o.value)!=null&&m.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function h(){t("afterLeave")}return U(s,async m=>{var S;m||(await de(),(S=o.value.activatorEl)==null||S.focus({preventScroll:!0}))}),M(()=>{const m=ne.filterProps(e),S=Y({"aria-haspopup":"dialog"},e.activatorProps),g=Y({tabindex:-1},e.contentProps);return l(ne,Y({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},m,{modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,"aria-modal":"true",activatorProps:S,contentProps:g,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:h},r),{activator:a.activator,default:function(){for(var b=arguments.length,v=new Array(b),u=0;u<b;u++)v[u]=arguments[u];return l(Te,{root:"VDialog"},{default:()=>{var d;return[(d=a.default)==null?void 0:d.call(a,...v)]}})}})}),Le({},o)}}),wt=e=>{const{touchstartX:n,touchendX:t,touchstartY:a,touchendY:s}=e,r=.5,o=16;e.offsetX=t-n,e.offsetY=s-a,Math.abs(e.offsetY)<r*Math.abs(e.offsetX)&&(e.left&&t<n-o&&e.left(e),e.right&&t>n+o&&e.right(e)),Math.abs(e.offsetX)<r*Math.abs(e.offsetY)&&(e.up&&s<a-o&&e.up(e),e.down&&s>a+o&&e.down(e))};function Pt(e,n){var a;const t=e.changedTouches[0];n.touchstartX=t.clientX,n.touchstartY=t.clientY,(a=n.start)==null||a.call(n,{originalEvent:e,...n})}function $t(e,n){var a;const t=e.changedTouches[0];n.touchendX=t.clientX,n.touchendY=t.clientY,(a=n.end)==null||a.call(n,{originalEvent:e,...n}),wt(n)}function Bt(e,n){var a;const t=e.changedTouches[0];n.touchmoveX=t.clientX,n.touchmoveY=t.clientY,(a=n.move)==null||a.call(n,{originalEvent:e,...n})}function Tt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:t=>Pt(t,n),touchend:t=>$t(t,n),touchmove:t=>Bt(t,n)}}function Lt(e,n){var i;const t=n.value,a=t!=null&&t.parent?e.parentElement:e,s=(t==null?void 0:t.options)??{passive:!0},r=(i=n.instance)==null?void 0:i.$.uid;if(!a||!r)return;const o=Tt(n.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[r]=o,fe(o).forEach(c=>{a.addEventListener(c,o[c],s)})}function jt(e,n){var r,o;const t=(r=n.value)!=null&&r.parent?e.parentElement:e,a=(o=n.instance)==null?void 0:o.$.uid;if(!(t!=null&&t._touchHandlers)||!a)return;const s=t._touchHandlers[a];fe(s).forEach(i=>{t.removeEventListener(i,s[i])}),delete t._touchHandlers[a]}const ke={mounted:Lt,unmounted:jt},we=Symbol.for("vuetify:v-window"),Pe=Symbol.for("vuetify:v-window-group"),It=j({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...R(),...O(),...nt()},"VWindow"),At=L()({name:"VWindow",directives:{Touch:ke},props:It(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const{themeClasses:a}=Ze(e),{isRtl:s}=re(),{t:r}=pe(),o=Ae(e,Pe),i=P(),c=_(()=>s.value?!e.reverse:e.reverse),h=F(!1),m=_(()=>{const V=e.direction==="vertical"?"y":"x",E=(c.value?!h.value:h.value)?"-reverse":"";return`v-window-${V}${E}-transition`}),S=F(0),g=P(void 0),b=_(()=>o.items.value.findIndex(V=>o.selected.value.includes(V.id)));U(b,(V,C)=>{const E=o.items.value.length,ee=E-1;E<=2?h.value=V<C:V===ee&&C===0?h.value=!0:V===0&&C===ee?h.value=!1:h.value=V<C}),et(we,{transition:m,isReversed:h,transitionCount:S,transitionHeight:g,rootRef:i});const v=_(()=>e.continuous||b.value!==0),u=_(()=>e.continuous||b.value!==o.items.value.length-1);function d(){v.value&&o.prev()}function $(){u.value&&o.next()}const I=_(()=>{const V=[],C={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:o.prev,"aria-label":r("$vuetify.carousel.prev")};V.push(v.value?t.prev?t.prev({props:C}):l(w,C,null):l("div",null,null));const E={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:o.next,"aria-label":r("$vuetify.carousel.next")};return V.push(u.value?t.next?t.next({props:E}):l(w,E,null):l("div",null,null)),V}),W=_(()=>e.touch===!1?e.touch:{...{left:()=>{c.value?d():$()},right:()=>{c.value?$():d()},start:C=>{let{originalEvent:E}=C;E.stopPropagation()}},...e.touch===!0?{}:e.touch});return M(()=>ve(l(e.tag,{ref:i,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},a.value,e.class],style:e.style},{default:()=>{var V,C;return[l("div",{class:"v-window__container",style:{height:g.value}},[(V=t.default)==null?void 0:V.call(t,{group:o}),e.showArrows!==!1&&l("div",{class:"v-window__controls"},[I.value])]),(C=t.additional)==null?void 0:C.call(t,{group:o})]}}),[[tt("touch"),W.value]])),{group:o}}}),Nt=j({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...R(),...Me(),...He()},"VWindowItem"),Rt=L()({name:"VWindowItem",directives:{Touch:ke},props:Nt(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:t}=n;const a=at(we),s=Ne(e,Pe),{isBooted:r}=ot();if(!a||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=F(!1),i=_(()=>r.value&&(a.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function c(){!o.value||!a||(o.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function h(){var v;o.value||!a||(o.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=ae((v=a.rootRef.value)==null?void 0:v.clientHeight)),a.transitionCount.value+=1)}function m(){c()}function S(v){o.value&&de(()=>{!i.value||!o.value||!a||(a.transitionHeight.value=ae(v.clientHeight))})}const g=_(()=>{const v=a.isReversed.value?e.reverseTransition:e.transition;return i.value?{name:typeof v!="string"?a.transition.value:v,onBeforeEnter:h,onAfterEnter:c,onEnterCancelled:m,onBeforeLeave:h,onAfterLeave:c,onLeaveCancelled:m,onEnter:S}:!1}),{hasContent:b}=Re(e,s.isSelected);return M(()=>l(Ge,{transition:g.value,disabled:!r.value},{default:()=>{var v;return[ve(l("div",{class:["v-window-item",s.selectedClass.value,e.class],style:e.style},[b.value&&((v=t.default)==null?void 0:v.call(t))]),[[st,s.isSelected.value]])]}})),{groupItem:s}}}),Gt={__name:"Game",setup(e){const{mobile:n}=lt(),t=ue(),a=_t(),r=ut().params.id,o=P(!1),i=P(!1),c=P(0),h=_(()=>t.game?`Hola ${t.game.course.holes[c.value].hole_number}`:""),m=_(()=>t.game?`Par ${t.game.course.holes[c.value].par}`:""),S=_(()=>t.game?`${t.game.course.holes[c.value].distance}m`:""),g=P(null),b=async()=>{console.log("HERE",g.value),await a.assignScores(r,t.game.players,g.value)};return rt(async()=>{await t.getGameById(r),g.value=t.game.players.map(()=>{const v={};for(const u of t.game.course.holes)v[u.id]=null;return v})}),(v,u)=>(y(),B(T,null,[k(t).game&&g.value?(y(),x(J,{key:0,height:k(n)?"95vh":void 0,width:k(n)?"100vw":void 0,class:"d-flex flex-column"},{default:f(()=>[l(At,{modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=d=>c.value=d),class:"flex-grow-1"},{default:f(()=>[(y(!0),B(T,null,A(k(t).game.course.holes,d=>(y(),x(Rt,{key:d.hole_number},{default:f(()=>[l(q,{class:"d-flex justify-center"},{default:f(()=>[H("span",null,N(h.value)+" ("+N(S.value)+")",1)]),_:1}),l(Oe,{class:"d-flex justify-space-around"},{default:f(()=>[H("span",null,N(m.value),1)]),_:1}),l(z,null,{default:f(()=>[l(me,{fluid:""},{default:f(()=>[(y(!0),B(T,null,A(k(t).game.players,($,I)=>(y(),x(G,{key:I},{default:f(()=>[l(K,null,{default:f(()=>[l(De,{modelValue:g.value[I][d.id],"onUpdate:modelValue":W=>g.value[I][d.id]=W,label:$.player.name,variant:"outlined",type:"number"},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"]),l(We),l(Xe,{class:"d-flex justify-space-between"},{default:f(()=>[l(w,{disabled:c.value==0,variant:"text",onClick:u[1]||(u[1]=d=>c.value--),icon:"mdi-arrow-left"},null,8,["disabled"]),l(w,{icon:"mdi-map",onClick:u[2]||(u[2]=d=>o.value=!0)}),l(w,{icon:"mdi-view-list",onClick:u[3]||(u[3]=d=>i.value=!0)}),c.value<k(t).game.course.holes.length-1?(y(),x(w,{key:0,onClick:u[4]||(u[4]=d=>c.value++),icon:"mdi-arrow-right"})):(y(),x(w,{key:1,icon:"mdi-check",onClick:b}))]),_:1})]),_:1},8,["height","width"])):it("",!0),l(le,{modelValue:o.value,"onUpdate:modelValue":u[6]||(u[6]=d=>o.value=d),fullscreen:""},{default:f(()=>[l(St,{onClick:u[5]||(u[5]=d=>o.value=!1)})]),_:1},8,["modelValue"]),l(le,{modelValue:i.value,"onUpdate:modelValue":u[8]||(u[8]=d=>i.value=d),fullscreen:""},{default:f(()=>[l(Et,{onClick:u[7]||(u[7]=d=>i.value=!1),scores:g.value},null,8,["scores"])]),_:1},8,["modelValue"])],64))}},Ht={};function Mt(e,n){const t=Gt;return y(),x(t)}const Wt=Ye(Ht,[["render",Mt]]);export{Wt as default};
